<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>vb YAZILIM | Development, Training and Consultancy | How much do you care to write good Django code?</title>
    <link rel="alternate" type="application/atom+xml" title="Atom Feed" href="/feed.xml" />

    <meta name="description" content="We are software development, training and consultancy company. We provide highly skilled Django application development services.">
    <meta name="keywords" content="python,ruby,bash,javascript,applescript,django,flask,sinatra,ror,rails,ruby on rails,postgresql,deployment,gentoo,redis" />

    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/bulma/0.7.5/css/bulma.min.css">
    <link rel="icon" href="/public/images/favicon-32.png">
    <link href="/public/css/syntax.css" rel="stylesheet" />
    
    <link href="/public/css/application.css" rel="stylesheet" />
    <meta property="og:title" content="vb YAZILIM | How much do you care to write good Django code?" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://vbyazilim.com/blog/2019/06/02/how-much-do-you-care-to-write-good-django-code/" />
    
    <meta property="og:description" content="I’ve been having often conversations with fellow Djangonauts. I always ask one
little question during the talk…
">
    <meta property="og:locale" content="en_US" />
    <meta property="og:site_name" content="vb YAZILIM" />
    

    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-52664816-9"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-52664816-9');
    </script>
</head>
<body>
    

    <section class="section">
    <div class="container">
        <nav class="level is-mobile">
            <div class="level-left">
                <div class="level-item">
                    <a href="/" title="Home"><img src="/public/images/vb-yazilim-logo.svg" class="vb-logo" alt="Vb yazilim logo" /></a>
                </div>
            </div>
            <div class="level-right">
                <div class="level-item"><a title="Blog posts" href="/blog/">Blog</a></div>
                <div class="level-item"><a title="Services" href="/services/">Services</a></div>
                <div class="level-item"><a title="Training" href="/training/">Training</a></div>
                <div class="level-item"><a title="Atom feed" href="/feed.xml"><span class="icon"><i class="fas fa-rss-square"></i></span></a></div>
            </div>
        </nav>
    </div>
</section>

    
<section class="section">
    <div class="container">
        <div class="columns">
            <div class="column is-9-desktop">
                <article>
                    <div class="content is-medium">
                        <div class="meta">
                            <small>Uğur Özyılmazel &mdash; </small>
                            <time pubdate datetime="2019-06-02T10:30:00+03:00" title="02 June 2019, Sunday 10:30">02 June 2019, Sunday 10:30</time>
                             <span class="category"> &mdash; Filed under <a href="/blog/category/development/">development</a></span>
                        </div>

                        <h1 class="title">How much do you care to write good Django code?</h1>
                        
                        <div class="tags">
                            <span class="tag is-info"><a title="Posts with &ldquo;django&rdquo; tag" href="/blog/tag/django/">django</a></span>
                    
                        </div>
                
                
                        <div class="yield mt-3-desktop">
                            <p>I’ve been having often conversations with fellow Djangonauts. I always ask one
little question during the talk&hellip;</p>

<p></p>

<h3>Have you ever read the Django’s “Writing code” article ?</h3>

<p>I’ve been doing Django hire interviews lately. Before I criticize or start
review the code, I always ask the <strong>question</strong>&hellip; Unfortunately, most of the
developers are unaware of that document. They don’t even know if It exists.</p>

<p>If you navigate through the <a href="https://docs.djangoproject.com/en/dev/internals/contributing/">Contributing to Django</a> page, you’ll see the
<a href="https://docs.djangoproject.com/en/dev/internals/contributing/writing-code/">Writing code</a> section under the list items. Probably, most users never
contrive to look at the docs unless they’re planning to contribute source code.
Rules of writing Django code is already out there&hellip;</p>

<h3>Coding style</h3>

<p>If you <a href="https://docs.djangoproject.com/en/dev/internals/contributing/writing-code/coding-style/">click the link</a>, you’ll navigate to coding style page in Django
documentation. I’m skipping <em>Python style</em> part since you need to know that
already!</p>

<h4>Sorting imports</h4>

<p>Document tells us to sort our <code>import</code> statements with <code>isort</code>.</p>
<div class="highlight"><pre class="highlight shell"><code><span class="nv">$ </span>python <span class="nt">-m</span> pip install isort
<span class="nv">$ </span>isort <span class="nt">-rc</span> <span class="nb">.</span>
</code></pre></div>
<p>More detailed information can ben found <a href="https://isort.readthedocs.io/en/latest/">here</a>. You can also integrate
this with your code editing tool/ide etc. I mostly use this configuration:</p>
<div class="highlight"><pre class="highlight toml"><code><span class="nn">[settings]</span>
<span class="py">line_length</span> <span class="p">=</span> <span class="mi">60</span>
<span class="py">multi_line_output</span> <span class="p">=</span> <span class="mi">3</span>
<span class="py">use_parentheses</span> <span class="p">=</span> <span class="kc">true</span>
<span class="py">include_trailing_comma</span> <span class="p">=</span> <span class="kc">true</span>
<span class="py">quiet</span> <span class="p">=</span> <span class="kc">true</span>
<span class="py">force_grid_wrap</span> <span class="p">=</span> <span class="mi">0</span>
<span class="py">known_django</span> <span class="p">=</span> <span class="err">django</span>
<span class="py">sections</span> <span class="p">=</span> <span class="err">FUTURE</span><span class="p">,</span><span class="err">STDLIB</span><span class="p">,</span><span class="err">DJANGO</span><span class="p">,</span><span class="err">THIRDPARTY</span><span class="p">,</span><span class="err">FIRSTPARTY</span><span class="p">,</span><span class="err">LOCALFOLDER</span>
</code></pre></div>
<p>Small example after sort process:</p>
<div class="highlight"><pre class="highlight python"><code><span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">Counter</span>

<span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span><span class="p">,</span> <span class="n">router</span><span class="p">,</span> <span class="n">transaction</span>
<span class="kn">from</span> <span class="nn">django.db.models.deletion</span> <span class="kn">import</span> <span class="n">Collector</span>
<span class="kn">from</span> <span class="nn">django.utils</span> <span class="kn">import</span> <span class="n">timezone</span>
<span class="kn">from</span> <span class="nn">django.utils.translation</span> <span class="kn">import</span> <span class="n">ugettext_lazy</span> <span class="k">as</span> <span class="n">_</span>

<span class="kn">from</span> <span class="nn">..utils</span> <span class="kn">import</span> <span class="n">console</span>
<span class="kn">from</span> <span class="nn">.signals</span> <span class="kn">import</span> <span class="n">post_undelete</span><span class="p">,</span> <span class="n">pre_undelete</span>
</code></pre></div>
<p>When you integrate <code>isort</code> to your editor or maybe a git-hook, you don’t need
to worry about the order of imports anymore&hellip;</p>
<div class="highlight"><pre class="highlight python"><code><span class="kn">import</span> <span class="nn">logging</span>

<span class="kn">from</span> <span class="nn">django.contrib.auth.models</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">AbstractBaseUser</span><span class="p">,</span>
    <span class="n">BaseUserManager</span><span class="p">,</span>
    <span class="n">PermissionsMixin</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span>
<span class="kn">from</span> <span class="nn">django.utils.translation</span> <span class="kn">import</span> <span class="n">ugettext_lazy</span> <span class="k">as</span> <span class="n">_</span>

<span class="kn">from</span> <span class="nn">baseapp.utils</span> <span class="kn">import</span> <span class="n">save_file</span> <span class="k">as</span> <span class="n">custom_save_file</span>
</code></pre></div>
<p>Also, sorting imports are explained very well in the Django docs:</p>
<div class="highlight"><pre class="highlight python"><code><span class="c"># future</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">unicode_literals</span>

<span class="c"># standard library</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">from</span> <span class="nn">itertools</span> <span class="kn">import</span> <span class="n">chain</span>

<span class="c"># third-party</span>
<span class="kn">import</span> <span class="nn">bcrypt</span>

<span class="c"># Django</span>
<span class="kn">from</span> <span class="nn">django.http</span> <span class="kn">import</span> <span class="n">Http404</span>
<span class="kn">from</span> <span class="nn">django.http.response</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">Http404</span><span class="p">,</span> <span class="n">HttpResponse</span><span class="p">,</span> <span class="n">HttpResponseNotAllowed</span><span class="p">,</span> <span class="n">StreamingHttpResponse</span><span class="p">,</span>
    <span class="n">cookie</span><span class="p">,</span>
<span class="p">)</span>

<span class="c"># local Django</span>
<span class="kn">from</span> <span class="nn">.models</span> <span class="kn">import</span> <span class="n">LogEntry</span>

<span class="c"># try/except</span>
<span class="k">try</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">yaml</span>
<span class="k">except</span> <span class="nb">ImportError</span><span class="p">:</span>
    <span class="n">yaml</span> <span class="o">=</span> <span class="bp">None</span>

<span class="n">CONSTANT</span> <span class="o">=</span> <span class="s">'foo'</span>


<span class="k">class</span> <span class="nc">Example</span><span class="p">:</span>
    <span class="c"># ...</span>
</code></pre></div>
<h4>What about models ?</h4>

<p>Django model, represents a table in database and single entity of data. That’s
why model name should be <strong>singular</strong>, not plural! If you want to store blog
posts in a database, you must name It to <code>Post</code> not <del><code>Posts</code></del>. Also, model name
is a Python Class. You must follow the naming convention of Python which is
<code>InitialCaps</code></p>

<p>Field names should be singular except <code>ManyToMany</code> or similar field types. Naming
should be <code>snake_case</code>. There are good examples, <strong>DO</strong>es, <strong>DON’T</strong>s in the
docs page. Here is a good one:</p>
<div class="highlight"><pre class="highlight python"><code><span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span>

<span class="k">class</span> <span class="nc">Person</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">first_name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
    <span class="n">last_name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">40</span><span class="p">)</span>
</code></pre></div>
<p>I’ve seen two most common behavior about relation models such as <code>ForeignKey</code>
and <code>MonyToMany</code> fields.</p>

<h3>Please use <code>to=&#39;ModelName&#39;</code> convention</h3>

<p>Fields takes <code>kwargs</code> and <code>args</code>. Most of the candidates did the same writing:</p>
<div class="highlight"><pre class="highlight python"><code><span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span>
<span class="kn">from</span> <span class="nn">django.utils.translation</span> <span class="kn">import</span> <span class="n">ugettext_lazy</span> <span class="k">as</span> <span class="n">_</span>

<span class="kn">from</span> <span class="nn">.models</span> <span class="kn">import</span> <span class="n">Category</span>

<span class="k">class</span> <span class="nc">Post</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">category</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span>
        <span class="n">Category</span><span class="p">,</span>
        <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">,</span>
        <span class="n">related_name</span><span class="o">=</span><span class="s">'posts'</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s">'category'</span><span class="p">),</span>
    <span class="p">)</span>
</code></pre></div>
<p>Please define relation fields with using <code>to</code> keyword argument:</p>
<div class="highlight"><pre class="highlight python"><code><span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span>
<span class="kn">from</span> <span class="nn">django.utils.translation</span> <span class="kn">import</span> <span class="n">ugettext_lazy</span> <span class="k">as</span> <span class="n">_</span>

<span class="k">class</span> <span class="nc">Post</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">category</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span>
        <span class="n">to</span><span class="o">=</span><span class="s">'Category'</span><span class="p">,</span>
        <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">,</span>
        <span class="n">related_name</span><span class="o">=</span><span class="s">'posts'</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s">'category'</span><span class="p">),</span>
    <span class="p">)</span>
</code></pre></div>
<p>This helps in two ways:</p>

<ol>
<li>You are safe from <strong>circular import</strong> situation. You are free to import any
model in anywhere&hellip;</li>
<li>This is more pythonic and readable&hellip; We define all others such as
<code>on_delete</code>, <code>related_name</code> why not showing which model is targeted ?</li>
</ol>

<h3>The order of model inner classes</h3>

<p>Django docs tell:</p>

<ul>
<li>All database fields</li>
<li>Custom manager attributes</li>
<li><code>class Meta</code></li>
<li><code>def __str__()</code></li>
<li><code>def save()</code></li>
<li><code>def get_absolute_url()</code></li>
<li>Any custom methods</li>
</ul>

<p>Please follow the convention. Again, <strong>you are not writing</strong> code to contribute
Django. You are writing code for your self, your company, your family, your
anything&hellip; If there are some conventions, let’s follow them&hellip; Why ?</p>

<h2>Convention over configuration</h2>

<p>I heard this term for the first time from <a href="https://rubyonrails.org">Ruby on Rails</a> community. Let’s
keep the conventions also in <code>choices</code> fields too:</p>

<blockquote>
<p>If choices is defined for a given model field, define each choice as a list of
tuples, with an all-uppercase name as a class attribute on the model</p>
</blockquote>

<p>Example:</p>
<div class="highlight"><pre class="highlight python"><code><span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span>
<span class="kn">from</span> <span class="nn">django.utils.translation</span> <span class="kn">import</span> <span class="n">ugettext_lazy</span> <span class="k">as</span> <span class="n">_</span>

<span class="k">class</span> <span class="nc">Post</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">STATUS_OFFLINE</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">STATUS_ONLINE</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">STATUS_DELETED</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="n">STATUS_DRAFT</span> <span class="o">=</span> <span class="mi">3</span>
    <span class="n">STATUS_CHOICES</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="n">STATUS_OFFLINE</span><span class="p">,</span> <span class="n">_</span><span class="p">(</span><span class="s">'Offline'</span><span class="p">)),</span>
        <span class="p">(</span><span class="n">STATUS_ONLINE</span><span class="p">,</span> <span class="n">_</span><span class="p">(</span><span class="s">'Online'</span><span class="p">)),</span>
        <span class="p">(</span><span class="n">STATUS_DELETED</span><span class="p">,</span> <span class="n">_</span><span class="p">(</span><span class="s">'Deleted'</span><span class="p">)),</span>
        <span class="p">(</span><span class="n">STATUS_DRAFT</span><span class="p">,</span> <span class="n">_</span><span class="p">(</span><span class="s">'Draft'</span><span class="p">)),</span>
    <span class="p">]</span>
</code></pre></div>
<hr>

<p>Document also covers;</p>

<ul>
<li>Template style</li>
<li>View style</li>
<li>Use of <code>django.conf.settings</code></li>
</ul>

<p>and few other miscellaneous information, <a href="https://docs.djangoproject.com/en/dev/internals/contributing/writing-code/coding-style/">please read</a> It when you need It.</p>

                        </div>
                    </div>
                    <div class="sharethis-inline-share-buttons" style="margin-top: 3em;"></div>
                </article>
            </div>
            
            <div class="column is-3-desktop article-right-column is-hidden-touch">
                <div class="content is-medium">
<h4 class="title">Related Posts</h4><p><a href="/blog/2019/07/07/quick-query-optimization-in-bare-django-project/" title="Quick query optimization in bare Django project">Quick query optimization in bare Django project</a></p><time datetime="2019-07-07T14:37:00+03:00">07 July 2019, Sunday 14:37</time><hr /><h4 class="title">Lastest Posts</h4><p><a href="/blog/2019/07/07/quick-query-optimization-in-bare-django-project/" title="Quick query optimization in bare Django project">Quick query optimization in bare Django project</a></p><time datetime="2019-07-07T14:37:00+03:00">07 July 2019, Sunday 14:37</time><p><a href="/blog/2019/06/03/better-tool-for-listing-virtual-environment/" title="Better tool for listing virtual environments">Better tool for listing virtual environments</a></p><time datetime="2019-06-03T10:00:00+03:00">03 June 2019, Monday 10:00</time><p><a href="/blog/2019/06/01/hello-world/" title="hello world">hello world</a></p><time datetime="2019-06-01T10:00:00+03:00">01 June 2019, Saturday 10:00</time>                </div>
            </div>
        </div>
    </div>
</section>






    <div id="ga-notice" class="is-hidden">
        <div class="notification is-size-7-touch has-text-centered is-radiusless">
            <button class="delete mr-1"></button>
            We are using Google Analytics on our page to track visit counts and other statistic related datas.
            We would like to inform you about that...
        </div>
    </div>

    <footer class="footer has-background-color-vb has-text-white">
    <div class="container">
        <div class="columns">
            <div class="column">
                <div class="content">
                    <p><strong>vb YAZILIM</strong> - Uğur Özyılmazel</p>
                    <address>
                        Meşrutiyet Mah. Samanyolu sk. 11/7<br/>
                        34363 - Şişli / İstanbul<br/>
                        Türkiye<br/><br/>
                        <a href="tel:+905333774300"><span class="icon"><i class="fas fa-phone-square"></i></span>+90-(0)533-3774300</a><br/>
                        <a href="mailto:hello@vbyazilim.com"><span class="icon"><i class="fas fa-envelope-square"></i></span>hello@vbyazilim.com</a>
                    </address>
                </div>
            </div>
            <div class="column has-text-right-tablet footer-right-icons-tablet">
                <p>
                    <a title="GitHub repo of vb YAZILIM" target="_blank" href="https://github.com/vbyazilim">
                        <span class="icon is-medium">
                            <i class="fab fa-github-square fa-2x"></i>
                        </span>
                    </a>
                    <a target="_blank" href="https://twitter.com/vbyazilim">
                        <span class="icon is-medium">
                            <i class="fab fa-twitter-square fa-2x"></i>
                        </span>
                    </a>
                </p>
                <p class="mt-1">
                    made with <a class="is-external-link" href="https://middlemanapp.com">Middleman</a><br/>
                    
                    <a class="is-external-link" href="https://www.ruby-lang.org">Ruby</a> 
                    <a class="is-external-link" href="https://sass-lang.com">Sass</a><br/>
                    
                    <a class="is-external-link" href="https://bulma.io">Bulma</a> 
                    <a class="is-external-link" href="https://fontawesome.com">Font Awesome</a><br/>

                    <a class="is-external-link" href="https://www.w3.org/TR/html/">HTML</a> 
                    <a class="is-external-link" href="https://www.w3.org/Style/CSS/">CSS</a> 
                    <a class="is-external-link" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript">JavaScript</a> 
                </p>
                <p class="mt-1">hosted at <a class="is-external-link" href="https://pages.github.com">GitHub Pages</a></p>
            </div>
        </div>
    </div>
</footer>


    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script data-search-pseudo-elements defer src="//use.fontawesome.com/releases/v5.3.1/js/all.js"></script>
        <!-- sharethis -->
    <script type='text/javascript' src='//platform-api.sharethis.com/js/sharethis.js#property=5d2213a5b54cea00128f1df8&product=social-ab' async='async'></script>

    <script src="/public/js/app.js"></script>
</body>
</html>
